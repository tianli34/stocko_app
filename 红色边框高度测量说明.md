# 红色边框高度测量功能说明

## 功能概述

已为页面中的9个红色边框容器添加了高度测量功能。每个红色边框的右上角会显示一个红色标签，实时显示该容器内容的高度（单位：像素）。

## 实现方式

### 1. 创建了 `MeasuredContainer` 组件

位置：`lib/features/product/presentation/widgets/debug/measured_container.dart`

这是一个可复用的调试组件，功能包括：
- 使用 `GlobalKey` 获取容器的 `RenderBox`
- 在首帧渲染后自动测量高度
- 在容器右上角显示高度标签
- 支持自定义标签名称（如"单位"、"类别"、"价格"等）

### 2. 更新了9个组件

已将以下组件中的红色边框 `Container` 替换为 `MeasuredContainer`：

1. **AppTextField** - 通用文本输入框
   - 文件：`lib/features/product/presentation/widgets/inputs/app_text_field.dart`
   - 标签：显示字段名称（如"库存预警值"）

2. **UnitTypeaheadField** - 单位输入框
   - 文件：`lib/features/product/presentation/widgets/inputs/unit_typeahead_field.dart`
   - 标签：单位

3. **CategoryTypeaheadField** - 类别输入框
   - 文件：`lib/features/product/presentation/widgets/inputs/category_typeahead_field.dart`
   - 标签：类别

4. **BarcodeSection** - 条码输入区域
   - 文件：`lib/features/product/presentation/widgets/sections/barcode_section.dart`
   - 标签：条码

5. **PricingSection** - 价格输入区域
   - 文件：`lib/features/product/presentation/widgets/sections/pricing_section.dart`
   - 标签：价格

6. **ShelfLifeSection** - 保质期输入区域
   - 文件：`lib/features/product/presentation/widgets/sections/shelf_life_section.dart`
   - 标签：保质期

## 使用效果

运行应用后，在货品添加/编辑页面（`ProductAddEditScreen`）中，你会看到：

- 每个红色边框的右上角都有一个红色标签
- 标签显示格式：`标签名: XXX.Xpx`（例如："单位: 58.0px"）
- 高度会在组件首次渲染后自动计算并显示
- 如果内容高度发生变化，标签会自动更新

## 如何移除此功能

如果不再需要此调试功能，只需：

1. 将各个组件中的 `MeasuredContainer` 替换回原来的 `Container`
2. 恢复 `decoration: BoxDecoration(border: Border.all(color: Colors.red, width: 2))`
3. 删除 `import '../debug/measured_container.dart';` 导入语句

## 技术细节

- 使用 `GlobalKey` 获取组件的 `RenderBox`
- 通过 `WidgetsBinding.instance.addPostFrameCallback` 确保在首帧渲染后测量
- 使用 `Stack` 和 `Positioned` 将高度标签定位在容器右上角
- 标签背景色为红色，与边框颜色一致，便于识别
